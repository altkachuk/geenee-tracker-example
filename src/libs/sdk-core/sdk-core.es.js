const e="post get put patch del".split(" "),t=/^2\d+/,n=/^application\/json/,o=["post","put"];var r=new class{constructor(){var t=this;e.forEach((function(e){t[e]=function(n,...o){return t.request("del"===e?"delete":e,n,...o)}})),this.onFailure=this.onFailure.bind(this),this.handleResponse=this.handleResponse.bind(this)}getOptions(e,t){let n=void 0,r=null;~o.indexOf(e)&&(n=t.shift()),r=t.shift()||{};let s=r.headers||{};return s instanceof Headers||(s=new Headers(s)),!0!==r.raw&&(~o.indexOf(e)&&!1!==r.contentType&&s.append("Content-Type","application/json"),!1!==r.json&&"object"==typeof n&&(n=JSON.stringify(n))),{method:e.toUpperCase(),...r,headers:s,body:n}}onFailure(e,t,n){const o=`Error while ${e.toUpperCase()} ${t}: ${n}`;return"test"!==process.env.NODE_ENV&&console&&console.error(o),Promise.reject(new Error(o))}handleResponse(e,o,r,s){var i=this;const a=r.status,c=r.headers.get("Content-Type");let u=null;return u=s.rawResponse||!s.json&&!n.test(c)?r.text():r.json(),u.then((function(n){return t.test(a)?n:i.onFailure(e,o,r.statusText)}),(function(t){return t instanceof Error?i.onFailure(e,o,t.message||t.stack):i.onFailure(e,o,r.statusText)}))}request(e,t,...n){var o=this;const r=this.getOptions(e,n);return fetch(t,r).catch((function(n){return o.onFailure(e,t,n.message||n)})).then((function(n){return o.handleResponse(e,t,n,r)}))}};let s=document.createElement("canvas"),i=s.getContext("2d"),a="geenee";const c=function(){return{recognition:`https://${a}-recognition.geenee.io`,content:`https://${a}-content.geenee.io`}},u={recognizeImage:function(e){return new Promise((function(t,n){const[o,a]=function(e){return[0|(e.width||e.videoWidth),0|(e.height||e.videoHeight)]}(e);if(0===o||0===a)return Promise.reject(new Error("source is too small"));!function(e,t,n){s.width=t,s.height=n,i.drawImage(e,0,0,t,n)}(e,o,a),s.toBlob((function(e){r.post(c().recognition+"/api/v0/recognize-image",e,{raw:!0,headers:{"Content-Type":"application/octet-stream"}}).then(t,n)}),"image/jpeg")}))},getProject:function(e){return r.get(`${c().content}/api/v0/content/web?project_id=${e}`)},setTenant:function(e){return a=e}};window.Geenee=u;export default u;
